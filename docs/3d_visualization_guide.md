# 3Då¯è§†åŒ–æŒ‡å— (TVTK/Mayavi)

æœ¬æ–‡æ¡£è¯´æ˜å¦‚ä½•ä¸ºAdaBoosté¡¹ç›®æ·»åŠ 3Då¯è§†åŒ–ï¼Œä»¥åŠTVTKçš„é€‚ç”¨æ€§åˆ†æã€‚

## é‡è¦æç¤º âš ï¸

**TVTK/Mayaviä¸»è¦ç”¨äºç§‘å­¦è®¡ç®—çš„3Dæ•°æ®å¯è§†åŒ–**ï¼Œå¯¹äºæœ¬é¡¹ç›®ï¼ˆMNISTåˆ†ç±»ã€ç»Ÿè®¡åˆ†æï¼‰ï¼Œ**matplotlibå·²ç»è¶³å¤Ÿä¸”æ›´åˆé€‚**ã€‚

ä½†å¦‚æœä½ æƒ³è¦3Dæ•ˆæœæˆ–å­¦ä¹ TVTKï¼Œè¿™é‡Œæä¾›äº†ä¸€äº›åˆ›æ„æ–¹æ¡ˆã€‚

---

## TVTK vs Matplotlib

### Matplotlibçš„ä¼˜åŠ¿ï¼ˆå½“å‰é¡¹ç›®ï¼‰âœ…

| ç‰¹æ€§ | Matplotlib | TVTK/Mayavi |
|------|-----------|-------------|
| å®‰è£…éš¾åº¦ | ç®€å• | å¤æ‚ï¼ˆéœ€è¦Qtç­‰ï¼‰ |
| 2Då›¾è¡¨ | â­â­â­â­â­ | â­â­ |
| ç»Ÿè®¡å›¾è¡¨ | â­â­â­â­â­ | â­â­ |
| è·¨å¹³å° | â­â­â­â­â­ | â­â­â­ |
| å­¦ä¹ æ›²çº¿ | å¹³ç¼“ | é™¡å³­ |
| æ–‡æ¡£ä¸°å¯Œåº¦ | æå¥½ | ä¸€èˆ¬ |

### TVTKçš„ä¼˜åŠ¿ï¼ˆç§‘å­¦å¯è§†åŒ–ï¼‰

| ç‰¹æ€§ | Matplotlib | TVTK/Mayavi |
|------|-----------|-------------|
| 3Dä½“æ•°æ® | â­â­ | â­â­â­â­â­ |
| å¤æ‚3Då‡ ä½• | â­â­ | â­â­â­â­â­ |
| äº¤äº’æ€§ | â­â­â­ | â­â­â­â­â­ |
| å¤§è§„æ¨¡3Dæ•°æ® | â­ | â­â­â­â­ |

**ç»“è®ºï¼š** æœ¬é¡¹ç›®ä½¿ç”¨matplotlibå·²ç»å¾ˆå¥½ï¼ŒTVTKæ˜¯å¯é€‰çš„å­¦ä¹ å’Œå®éªŒå·¥å…·ã€‚

---

## å®‰è£…TVTK/Mayavi

### ä½¿ç”¨Condaï¼ˆæ¨èï¼‰

```bash
conda install -c conda-forge mayavi
```

### ä½¿ç”¨Pip

```bash
pip install mayavi
pip install PyQt5  # GUIåç«¯
```

### éªŒè¯å®‰è£…

```python
python -c "from mayavi import mlab; print('Mayaviå®‰è£…æˆåŠŸ')"
```

**å¸¸è§é—®é¢˜ï¼š**
- macOS: å¯èƒ½éœ€è¦ `brew install qt5`
- Linux: å¯èƒ½éœ€è¦å®‰è£…X11åº“
- Windows: é€šå¸¸condaå®‰è£…æœ€å¯é 

---

## å¯è§†åŒ–æ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šæ‰‹å†™æ•°å­—3Dé«˜åº¦å›¾ ğŸ”ï¸

**æ•ˆæœï¼š** å°†2Då›¾åƒè½¬ä¸º3Dåœ°å½¢

**ç”¨é€”ï¼š**
- ç›´è§‚å±•ç¤ºåƒç´ åˆ†å¸ƒ
- æ•™å­¦æ¼”ç¤º
- è‰ºæœ¯æ•ˆæœ

**ä»£ç ï¼š**
```python
from mayavi import mlab
from src.utils import prepare_data

# åŠ è½½æ•°æ®
X_train, _, y_train, _, _, _ = prepare_data(noise_ratio=0)

# é€‰æ‹©ä¸€ä¸ªæ•°å­—
idx = 0
digit = X_train[idx].reshape(28, 28)

# åˆ›å»º3Dé«˜åº¦å›¾
x, y = np.mgrid[0:28, 0:28]
mlab.surf(x, y, digit, colormap='viridis')
mlab.show()
```

**ä¼˜ç‚¹ï¼š**
- âœ… è§†è§‰å†²å‡»åŠ›å¼º
- âœ… é€‚åˆæ¼”ç¤º

**ç¼ºç‚¹ï¼š**
- âŒ å¯¹åˆ†æå¸®åŠ©æœ‰é™
- âŒ ä¸å¦‚2Då›¾åƒç›´è§‚

---

### æ–¹æ¡ˆ2ï¼šç‰¹å¾ç©ºé—´3Då¯è§†åŒ– ğŸŒŒ

**æ•ˆæœï¼š** PCAé™ç»´åˆ°3Dï¼Œå¯è§†åŒ–ç±»åˆ«åˆ†å¸ƒ

**ç”¨é€”ï¼š**
- ç†è§£ç±»åˆ«å¯åˆ†æ€§
- å‘ç°èšç±»ç»“æ„
- è¯Šæ–­åˆ†ç±»å›°éš¾

**ä»£ç ï¼š**
```python
from sklearn.decomposition import PCA
from mayavi import mlab

# PCAé™ç»´
pca = PCA(n_components=3)
X_3d = pca.fit_transform(X_train[:1000])

# ä¸ºæ¯ä¸ªç±»åˆ«ç»˜åˆ¶ç‚¹
colors = [(1,0,0), (0,1,0), (0,0,1), ...]
for digit in range(10):
    mask = y_train[:1000] == digit
    points = X_3d[mask]
    mlab.points3d(points[:,0], points[:,1], points[:,2],
                  color=colors[digit], scale_factor=2)

mlab.show()
```

**ä¼˜ç‚¹ï¼š**
- âœ… æœ‰åˆ†æä»·å€¼
- âœ… å¯ä»¥å‘ç°ç±»åˆ«é‡å 

**ç¼ºç‚¹ï¼š**
- âš ï¸ PCAåªä¿ç•™éƒ¨åˆ†ä¿¡æ¯
- âš ï¸ äº¤äº’ä¸å¦‚2Dæ•£ç‚¹å›¾æ–¹ä¾¿

**å»ºè®®ï¼š** ä½¿ç”¨matplotlibçš„3Dæ•£ç‚¹å›¾å¯èƒ½æ›´ç®€å•ï¼š

```python
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')
for digit in range(10):
    mask = y_train[:1000] == digit
    ax.scatter(X_3d[mask,0], X_3d[mask,1], X_3d[mask,2], label=str(digit))
plt.legend()
plt.show()
```

---

### æ–¹æ¡ˆ3ï¼šæ ·æœ¬æƒé‡æ¼”å˜3D ğŸ“Š

**æ•ˆæœï¼š** æ ·æœ¬Ã—è½®æ¬¡Ã—æƒé‡çš„3Dè¡¨é¢

**ç”¨é€”ï¼š**
- å¯è§†åŒ–æƒé‡æ¼”å˜
- å‘ç°æƒé‡çˆ†ç‚¸
- ç ”ç©¶è®­ç»ƒåŠ¨æ€

**ä»£ç ï¼š**
```python
from mayavi import mlab

# å‡è®¾æœ‰æƒé‡å†å²
# weight_history = [round1_weights, round2_weights, ...]

# åˆ›å»º3Dè¡¨é¢
x = np.arange(n_samples)
y = np.arange(n_rounds)
X, Y = np.meshgrid(x, y)
Z = np.array(weight_history)

mlab.surf(X, Y, Z, colormap='hot')
mlab.xlabel('æ ·æœ¬ç´¢å¼•')
mlab.ylabel('è®­ç»ƒè½®æ¬¡')
mlab.zlabel('æƒé‡å€¼')
mlab.show()
```

**ä¼˜ç‚¹ï¼š**
- âœ… å¯ä»¥çœ‹åˆ°æƒé‡çˆ†ç‚¸
- âœ… æ—¶é—´æ¼”å˜ç›´è§‚

**ç¼ºç‚¹ï¼š**
- âŒ å¯¹äºå¤§é‡æ ·æœ¬éš¾ä»¥å±•ç¤º
- âŒ 2Dçƒ­åŠ›å›¾å¯èƒ½æ›´æ¸…æ™°

**matplotlibæ›¿ä»£æ–¹æ¡ˆï¼š**

```python
import matplotlib.pyplot as plt

# 2Dçƒ­åŠ›å›¾
plt.imshow(weight_history, aspect='auto', cmap='hot')
plt.xlabel('æ ·æœ¬ç´¢å¼•')
plt.ylabel('è®­ç»ƒè½®æ¬¡')
plt.colorbar(label='æƒé‡')
plt.show()
```

---

### æ–¹æ¡ˆ4ï¼šå¤šä¸ªæ•°å­—å¹¶æ’3Då±•ç¤º ğŸ¨

**æ•ˆæœï¼š** åœ¨3Dç©ºé—´ä¸­å±•ç¤º0-9

**ç”¨é€”ï¼š**
- æ•™å­¦æ¼”ç¤º
- æµ·æŠ¥/å±•ç¤º

**ä¼˜ç‚¹ï¼š**
- âœ… è§†è§‰æ•ˆæœå¥½
- âœ… é€‚åˆå±•ç¤º

**ç¼ºç‚¹ï¼š**
- âŒ å®ç”¨ä»·å€¼æœ‰é™

---

## ä½¿ç”¨æŒ‡å—

### å¿«é€Ÿå¼€å§‹

```bash
# ç¡®ä¿å®‰è£…äº†Mayavi
pip install mayavi PyQt5

# è¿è¡Œ3Då¯è§†åŒ–æ¼”ç¤º
python visualize_3d_tvtk.py
```

**äº¤äº’æ“ä½œï¼š**
- ğŸ–±ï¸ é¼ æ ‡æ‹–åŠ¨ï¼šæ—‹è½¬è§†è§’
- ğŸ–±ï¸ æ»šè½®ï¼šç¼©æ”¾
- âŒ¨ï¸ 's'ï¼šä¿å­˜æˆªå›¾
- âŒ¨ï¸ 'r'ï¼šé‡ç½®è§†è§’

### é€‰é¡¹èœå•

è¿è¡Œè„šæœ¬åä¼šçœ‹åˆ°ï¼š

```
é€‰æ‹©å¯è§†åŒ–ç±»å‹:
1. å•ä¸ªæ•°å­—çš„3Dé«˜åº¦å›¾
2. å¤šä¸ªæ•°å­—çš„3Då±•ç¤º
3. ç‰¹å¾ç©ºé—´3Då¯è§†åŒ– (PCA)
4. å…¨éƒ¨æ¼”ç¤º
```

---

## å®é™…å»ºè®® ğŸ’¡

### å¯¹äºæœ¬é¡¹ç›®ï¼Œæ¨èä½¿ç”¨ï¼š

#### 1. Matplotlib 2Då¯è§†åŒ– â­â­â­â­â­

**åŸå› ï¼š**
- âœ… å·²ç»å®ç°ä¸”æ•ˆæœå¥½
- âœ… æ›´é€‚åˆç»Ÿè®¡åˆ†æ
- âœ… å®¹æ˜“ç†è§£å’Œè°ƒè¯•
- âœ… è·¨å¹³å°å…¼å®¹æ€§å¥½

**ç¤ºä¾‹ï¼š** ä½ é¡¹ç›®ä¸­å·²æœ‰çš„
- å­¦ä¹ æ›²çº¿
- æ··æ·†çŸ©é˜µ
- ç‰¹å¾é‡è¦æ€§çƒ­åŠ›å›¾
- è®­ç»ƒå†å²æ›²çº¿

#### 2. Plotlyäº¤äº’å¼å¯è§†åŒ– â­â­â­â­

**å¦‚æœéœ€è¦äº¤äº’æ€§ï¼š**

```bash
pip install plotly
```

```python
import plotly.graph_objects as go

# 3Dæ•£ç‚¹å›¾ï¼ˆæ¯”Mayaviæ›´è½»é‡ï¼‰
fig = go.Figure(data=[go.Scatter3d(
    x=X_3d[:,0], y=X_3d[:,1], z=X_3d[:,2],
    mode='markers',
    marker=dict(size=2, color=y_train[:1000])
)])
fig.show()  # åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼Œå¯äº¤äº’
```

**ä¼˜ç‚¹ï¼š**
- âœ… è½»é‡çº§ï¼Œæ˜“å®‰è£…
- âœ… åœ¨æµè§ˆå™¨ä¸­äº¤äº’
- âœ… å¯ä»¥å¯¼å‡ºä¸ºHTML
- âœ… æ”¯æŒç¼©æ”¾ã€æ—‹è½¬ã€å·¥å…·æç¤º

#### 3. Seabornç»Ÿè®¡å¯è§†åŒ– â­â­â­â­

**å¯¹äºç»Ÿè®¡åˆ†æï¼š**

```python
import seaborn as sns

# çƒ­åŠ›å›¾
sns.heatmap(confusion_matrix, annot=True)

# åˆ†å¸ƒå›¾
sns.violinplot(data=...)
```

---

## TVTKé€‚ç”¨åœºæ™¯ âœ¨

**ä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨TVTK/Mayaviï¼š**

1. **åŒ»å­¦å½±åƒ**
   - CTã€MRIä½“æ•°æ®
   - 3Dé‡å»º

2. **æµä½“åŠ¨åŠ›å­¦**
   - é€Ÿåº¦åœºå¯è§†åŒ–
   - å‹åŠ›åˆ†å¸ƒ

3. **åœ°è´¨æ•°æ®**
   - åœ°å½¢å¯è§†åŒ–
   - åœ°éœ‡æ•°æ®

4. **åˆ†å­ç»“æ„**
   - è›‹ç™½è´¨ç»“æ„
   - åŒ–å­¦é”®

5. **æœ‰é™å…ƒåˆ†æ**
   - åº”åŠ›åˆ†å¸ƒ
   - å˜å½¢å¯è§†åŒ–

**æœ¬é¡¹ç›®ï¼ˆMNISTåˆ†ç±»ï¼‰ï¼š**
- âŒ ä¸å±äºä¸Šè¿°åœºæ™¯
- âœ… matplotlibå·²ç»è¶³å¤Ÿ

---

## æ€§èƒ½å¯¹æ¯”

### æ¸²æŸ“é€Ÿåº¦

| æ•°æ®é‡ | Matplotlib | Mayavi | Plotly |
|--------|-----------|--------|--------|
| 100ç‚¹ | <0.1s | ~0.5s | ~0.2s |
| 1000ç‚¹ | ~0.2s | ~1s | ~0.5s |
| 10000ç‚¹ | ~1s | ~3s | ~2s |

### å†…å­˜å ç”¨

| å·¥å…· | å†…å­˜å ç”¨ | å¯åŠ¨æ—¶é—´ |
|------|---------|---------|
| Matplotlib | 50-100MB | <1s |
| Mayavi | 200-500MB | 2-5s |
| Plotly | 100-200MB | <1s |

---

## æ€»ç»“å»ºè®®

### å¯¹äºä½ çš„AdaBoosté¡¹ç›®ï¼š

**ä¼˜å…ˆçº§1ï¼šç»§ç»­ä½¿ç”¨Matplotlib** â­â­â­â­â­
- ä½ å·²ç»å®ç°çš„å¯è§†åŒ–å·²ç»å¾ˆå¥½
- å­¦ä¹ æ›²çº¿ã€æ··æ·†çŸ©é˜µã€çƒ­åŠ›å›¾éƒ½å¾ˆæ¸…æ™°
- ä¸éœ€è¦3D

**ä¼˜å…ˆçº§2ï¼šè€ƒè™‘Plotlyï¼ˆå¦‚æœéœ€è¦äº¤äº’ï¼‰** â­â­â­â­
- è½»é‡çº§
- æµè§ˆå™¨äº¤äº’
- å®¹æ˜“é›†æˆ

**ä¼˜å…ˆçº§3ï¼šTVTKä½œä¸ºå­¦ä¹ é¡¹ç›®** â­â­
- å­¦ä¹ 3Då¯è§†åŒ–æŠ€æœ¯
- åˆ›æ„æ¼”ç¤º
- ä½†å¯¹å®é™…åˆ†æå¸®åŠ©æœ‰é™

### æœ€ç»ˆå»ºè®®ï¼š

**ä¿æŒä½¿ç”¨matplotlib**ï¼Œå®ƒå·²ç»å®Œç¾æ»¡è¶³ä½ çš„éœ€æ±‚ã€‚å¦‚æœä½ ï¼š

1. æƒ³å­¦ä¹ 3Då¯è§†åŒ–æŠ€æœ¯ â†’ è¿è¡Œ `visualize_3d_tvtk.py` ç©ç©
2. éœ€è¦çœŸæ­£çš„äº¤äº’æ€§ â†’ è¯•è¯•Plotly
3. å…³æ³¨åˆ†æç»“æœ â†’ ç»§ç»­ç”¨matplotlib

**ä¸è¦ä¸ºäº†3Dè€Œ3D** - å¯è§†åŒ–çš„ç›®çš„æ˜¯å¸®åŠ©ç†è§£æ•°æ®ï¼Œä¸æ˜¯ä¸ºäº†ç‚«é…·ã€‚

---

## å‚è€ƒèµ„æ–™

- **Mayaviæ–‡æ¡£**: https://docs.enthought.com/mayavi/mayavi/
- **TVTKæ•™ç¨‹**: https://docs.enthought.com/mayavi/tvtk/
- **Plotlyæ–‡æ¡£**: https://plotly.com/python/
- **Matplotlib 3D**: https://matplotlib.org/stable/gallery/mplot3d/

---

**æœ€åæ›´æ–°ï¼š** 2024å¹´  
**ç»´æŠ¤è€…ï¼š** MLé¡¹ç›®ç»„


