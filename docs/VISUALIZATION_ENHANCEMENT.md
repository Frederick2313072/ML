# å¯è§†åŒ–å¢å¼ºè¯´æ˜

## âœ… ä¿®æ”¹å†…å®¹

å‚è€ƒ `docs/monitor.md` ä¸­çš„æ•°æ®ç»“æ„ï¼Œå¢å¼ºäº† `visualize_overfitting.py` çš„åŠŸèƒ½ã€‚

---

## ğŸ“Š æ–°å¢åŠŸèƒ½

### 1. **åŸºç¡€åŠŸèƒ½ï¼ˆä¿æŒä¸å˜ï¼‰**
- âœ… è¿‡æ‹Ÿåˆåˆ†æï¼ˆå­¦ä¹ æ›²çº¿ + è¿‡æ‹Ÿåˆç¨‹åº¦ï¼‰
- âœ… è‡ªåŠ¨è¯†åˆ«æœ€ä½³å¼±å­¦ä¹ å™¨æ•°é‡
- âœ… æ™ºèƒ½å»ºè®®

### 2. **æ–°å¢åŠŸèƒ½ï¼šè¯¦ç»†è®­ç»ƒç›‘æ§** â­

é€šè¿‡è®¾ç½® `enable_detailed_monitoring=True` å¯ç”¨ï¼Œç”Ÿæˆ **6ä¸ªå­å›¾** çš„è¯¦ç»†è®­ç»ƒè¿‡ç¨‹å¯è§†åŒ–ï¼š

#### å­å›¾1ï¼šé”™è¯¯ç‡æ¼”åŒ–
- **è“è‰²å®çº¿**ï¼šåŠ æƒé”™è¯¯ç‡ï¼ˆWeighted Errorï¼‰
- **çº¢è‰²è™šçº¿**ï¼šæœªåŠ æƒé”™è¯¯ç‡ï¼ˆUnweighted Errorï¼‰
- **æ•°æ®æ¥æº**ï¼š`monitor.error_history`, `monitor.error_without_weight_history`

#### å­å›¾2ï¼šAlpha ç³»æ•°æ¼”åŒ–
- **ç»¿è‰²æ›²çº¿**ï¼šæ¯ä¸ªå¼±å­¦ä¹ å™¨çš„æƒé‡ç³»æ•° Î±
- **æ©™è‰²è™šçº¿**ï¼šå¹³å‡ alpha å€¼
- **æ•°æ®æ¥æº**ï¼š`monitor.alpha_history`

#### å­å›¾3ï¼šè®­ç»ƒ vs éªŒè¯å‡†ç¡®ç‡
- **è“è‰²æ›²çº¿**ï¼šè®­ç»ƒé›†å‡†ç¡®ç‡
- **çº¢è‰²æ›²çº¿**ï¼šéªŒè¯é›†å‡†ç¡®ç‡
- **æ•°æ®æ¥æº**ï¼š`monitor.acc_on_train_data`, `monitor.val_acc_history`

#### å­å›¾4ï¼šå™ªå£°æ ·æœ¬ vs å¹²å‡€æ ·æœ¬æƒé‡
- **çº¢è‰²æ›²çº¿**ï¼šå™ªå£°æ ·æœ¬æ€»æƒé‡
- **ç»¿è‰²æ›²çº¿**ï¼šå¹²å‡€æ ·æœ¬æ€»æƒé‡
- **é»‘è‰²è™šçº¿**ï¼šåˆå§‹å‡è¡¡çº¿ï¼ˆ0.5ï¼‰
- **æ•°æ®æ¥æº**ï¼š`monitor.noisy_weight_history`, `monitor.clean_weight_history`
- **æ³¨æ„**ï¼šä»…å™ªå£°æ•°æ®æ—¶æ˜¾ç¤º

#### å­å›¾5ï¼šF1 åˆ†æ•°æ¼”åŒ–
- **è“è‰²æ›²çº¿**ï¼šè®­ç»ƒé›† F1
- **çº¢è‰²æ›²çº¿**ï¼šéªŒè¯é›† F1
- **æ•°æ®æ¥æº**ï¼š`monitor.f1_on_training_data`, `monitor.val_f1_history`

#### å­å›¾6ï¼šæ ·æœ¬æƒé‡åˆ†å¸ƒå˜åŒ–
- **ç®±å‹å›¾**ï¼šæ˜¾ç¤º4ä¸ªå…³é”®è½®æ¬¡çš„æƒé‡åˆ†å¸ƒ
  - ç¬¬1è½®
  - 1/3å¤„
  - 2/3å¤„
  - æœ€åä¸€è½®
- **æ•°æ®æ¥æº**ï¼š`monitor.sample_weights_history`

---

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### æ–¹å¼1ï¼šåŸºç¡€ä½¿ç”¨ï¼ˆé»˜è®¤ï¼‰

```bash
python visualize_overfitting.py
```

**ç”Ÿæˆå†…å®¹ï¼š**
- âœ… è¿‡æ‹Ÿåˆåˆ†æå›¾ï¼ˆ2ä¸ªå­å›¾ï¼‰
- âœ… æ–‡æœ¬åˆ†ææŠ¥å‘Š

### æ–¹å¼2ï¼šå¯ç”¨è¯¦ç»†ç›‘æ§

**ä¿®æ”¹è„šæœ¬ç¬¬138è¡Œï¼š**
```python
enable_detailed_monitoring = True  # æ”¹ä¸º True
```

**è¿è¡Œï¼š**
```bash
python visualize_overfitting.py
```

**ç”Ÿæˆå†…å®¹ï¼š**
- âœ… è¿‡æ‹Ÿåˆåˆ†æå›¾ï¼ˆ2ä¸ªå­å›¾ï¼‰
- âœ… è¯¦ç»†è®­ç»ƒç›‘æ§å›¾ï¼ˆ6ä¸ªå­å›¾ï¼‰â­ æ–°å¢
- âœ… å¢å¼ºçš„æ–‡æœ¬åˆ†ææŠ¥å‘Š

### æ–¹å¼3ï¼šä½¿ç”¨å¢å¼ºç‰ˆè„šæœ¬

```bash
python visualize_overfitting_enhanced.py
```

è¿™æ˜¯å®Œå…¨ç‹¬ç«‹çš„å¢å¼ºç‰ˆæœ¬ï¼Œé»˜è®¤å¯ç”¨æ‰€æœ‰ç›‘æ§åŠŸèƒ½ã€‚

---

## ğŸ“‹ å¯¹æ¯”è¡¨

| ç‰¹æ€§ | åŸç‰ˆæœ¬ | ä¿®æ”¹åï¼ˆé»˜è®¤ï¼‰ | ä¿®æ”¹åï¼ˆç›‘æ§å¯ç”¨ï¼‰ | å¢å¼ºç‰ˆè„šæœ¬ |
|-----|-------|--------------|-----------------|-----------|
| è¿‡æ‹Ÿåˆåˆ†æ | âœ… | âœ… | âœ… | âœ… |
| é”™è¯¯ç‡æ¼”åŒ– | âŒ | âŒ | âœ… | âœ… |
| Alphaç³»æ•° | âŒ | âŒ | âœ… | âœ… |
| å‡†ç¡®ç‡æ›²çº¿ | âŒ | âŒ | âœ… | âœ… |
| å™ªå£°å½±å“åˆ†æ | âŒ | âŒ | âœ… | âœ… |
| F1åˆ†æ•°æ¼”åŒ– | âŒ | âŒ | âœ… | âœ… |
| æƒé‡åˆ†å¸ƒ | âŒ | âŒ | âœ… | âœ… |
| è¿è¡Œæ—¶é—´ | 5-10åˆ†é’Ÿ | 5-10åˆ†é’Ÿ | 6-12åˆ†é’Ÿ | 6-12åˆ†é’Ÿ |

---

## ğŸ” æ•°æ®æ¥æºæ˜ å°„

æ ¹æ® `docs/monitor.md`ï¼Œæ‰€æœ‰å¯è§†åŒ–æ•°æ®æ¥è‡ª `BoostMonitor` å¯¹è±¡ï¼š

```python
# é”™è¯¯ç‡ç›¸å…³ï¼ˆ2.2èŠ‚ï¼‰
monitor.error_history              # åŠ æƒé”™è¯¯ç‡ â†’ å­å›¾1
monitor.error_without_weight_history  # æœªåŠ æƒé”™è¯¯ç‡ â†’ å­å›¾1
monitor.alpha_history              # Alphaç³»æ•° â†’ å­å›¾2

# éªŒè¯é›†æŒ‡æ ‡ï¼ˆ2.3èŠ‚ï¼‰
monitor.val_acc_history            # éªŒè¯å‡†ç¡®ç‡ â†’ å­å›¾3
monitor.val_f1_history             # éªŒè¯F1 â†’ å­å›¾5

# è®­ç»ƒé›†æŒ‡æ ‡ï¼ˆ2.4èŠ‚ï¼‰
monitor.acc_on_train_data          # è®­ç»ƒå‡†ç¡®ç‡ â†’ å­å›¾3
monitor.f1_on_training_data        # è®­ç»ƒF1 â†’ å­å›¾5

# æ ·æœ¬æƒé‡ç›¸å…³ï¼ˆ2.1èŠ‚ï¼‰
monitor.sample_weights_history     # å®Œæ•´æƒé‡å‘é‡ â†’ å­å›¾6
monitor.noisy_weight_history       # å™ªå£°æ ·æœ¬æƒé‡å’Œ â†’ å­å›¾4
monitor.clean_weight_history       # å¹²å‡€æ ·æœ¬æƒé‡å’Œ â†’ å­å›¾4
```

---

## ğŸ’¡ ä½¿ç”¨å»ºè®®

### åœºæ™¯1ï¼šå¿«é€Ÿè¯Šæ–­
```python
# ä½¿ç”¨é»˜è®¤é…ç½®
enable_detailed_monitoring = False  # é»˜è®¤
```
- â±ï¸ è¿è¡Œæ—¶é—´ï¼š5-10åˆ†é’Ÿ
- ğŸ“Š è·å¾—ï¼šè¿‡æ‹Ÿåˆåˆ†æ
- ğŸ¯ é€‚åˆï¼šå¿«é€Ÿæ‰¾åˆ°æœ€ä½³é…ç½®

### åœºæ™¯2ï¼šæ·±å…¥åˆ†æ
```python
# å¯ç”¨è¯¦ç»†ç›‘æ§
enable_detailed_monitoring = True
```
- â±ï¸ è¿è¡Œæ—¶é—´ï¼š6-12åˆ†é’Ÿ
- ğŸ“Š è·å¾—ï¼šè¿‡æ‹Ÿåˆåˆ†æ + è¯¦ç»†è®­ç»ƒåŠ¨æ€
- ğŸ¯ é€‚åˆï¼šç ”ç©¶è®­ç»ƒè¿‡ç¨‹ã€è®ºæ–‡æ’°å†™

### åœºæ™¯3ï¼šå™ªå£°ç ”ç©¶
```python
# å¯ç”¨ç›‘æ§ + ä½¿ç”¨å™ªå£°æ•°æ®
enable_detailed_monitoring = True
choice = 2  # æˆ– 3ï¼ˆ5%æˆ–10%å™ªå£°ï¼‰
```
- ğŸ“Š è·å¾—ï¼šå™ªå£°æ ·æœ¬æƒé‡æ¼”åŒ–åˆ†æ
- ğŸ¯ é€‚åˆï¼šç ”ç©¶ AdaBoost å¯¹å™ªå£°çš„æ•æ„Ÿæ€§

---

## ğŸ“ˆ å¯è§†åŒ–ç¤ºä¾‹è¯´æ˜

### æ­£å¸¸è®­ç»ƒæ¨¡å¼
```
é”™è¯¯ç‡ä¸‹é™ â†’ Alphaç¨³å®š â†’ å‡†ç¡®ç‡ä¸Šå‡ â†’ æƒé‡åˆ†å¸ƒåˆç†
```

### è¿‡æ‹Ÿåˆæ¨¡å¼
```
è®­ç»ƒé”™è¯¯ç‡æŒç»­ä¸‹é™ â†’ æµ‹è¯•å‡†ç¡®ç‡å¼€å§‹ä¸‹é™ â†’ è¿‡æ‹Ÿåˆç¨‹åº¦å¢åŠ 
```

### å™ªå£°æ•æ„Ÿæ¨¡å¼
```
å™ªå£°æ ·æœ¬æƒé‡æŒç»­ä¸Šå‡ â†’ è¶…è¿‡å¹²å‡€æ ·æœ¬ â†’ æ¨¡å‹è¿‡åº¦å…³æ³¨å™ªå£°
```

---

## ğŸ¯ å…³é”®æ´å¯Ÿ

é€šè¿‡è¯¦ç»†ç›‘æ§å¯ä»¥å‘ç°ï¼š

1. **Alpha ç³»æ•°å˜åŒ–**
   - å¦‚æœåæœŸ alpha å€¼å¾ˆå° â†’ å¼±å­¦ä¹ å™¨è´¡çŒ®å‡å°‘
   - å¦‚æœ alpha æ³¢åŠ¨å¤§ â†’ è®­ç»ƒä¸ç¨³å®š

2. **æ ·æœ¬æƒé‡æ¼”åŒ–**
   - æ­£å¸¸ï¼šæƒé‡é€æ¸é›†ä¸­åˆ°éš¾åˆ†ç±»æ ·æœ¬
   - å¼‚å¸¸ï¼šå°‘æ•°æ ·æœ¬æƒé‡çˆ†ç‚¸

3. **å™ªå£°å½±å“**
   - å™ªå£°æ ·æœ¬æƒé‡ > å¹²å‡€æ ·æœ¬ â†’ æ¨¡å‹è¢«å™ªå£°è¯¯å¯¼
   - æ¯”å€¼ > 1.5 â†’ å»ºè®®ä½¿ç”¨é²æ£’æ–¹æ³•

4. **è¿‡æ‹Ÿåˆä¿¡å·**
   - è®­ç»ƒå‡†ç¡®ç‡æŒç»­ä¸Šå‡ï¼Œæµ‹è¯•å‡†ç¡®ç‡å¹³ç¨³/ä¸‹é™
   - åŠ æƒé”™è¯¯ç‡å’ŒæœªåŠ æƒé”™è¯¯ç‡å·®è·æ‹‰å¤§

---

## ğŸ”§ è‡ªå®šä¹‰å¯è§†åŒ–

### æ·»åŠ æ–°çš„å­å›¾

åœ¨ `visualize_monitor_data()` å‡½æ•°ä¸­æ·»åŠ ï¼š

```python
# ç¤ºä¾‹ï¼šæ·»åŠ ç¬¬7ä¸ªå­å›¾ - é”™è¯¯ç‡å·®å¼‚
ax7 = plt.subplot(3, 3, 7)  # æ”¹ä¸º3x3å¸ƒå±€
error_diff = np.array(monitor.error_history) - np.array(monitor.error_without_weight_history)
ax7.plot(rounds, error_diff, 'purple', linewidth=2)
ax7.set_title('Error Rate Difference')
ax7.grid(True, alpha=0.3)
```

### ä¿å­˜å›¾è¡¨

ä¿®æ”¹å‡½æ•°è°ƒç”¨ï¼š
```python
visualize_monitor_data(monitor, best_n, noise_ratio > 0, save_path='monitoring.png')
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [monitor.md](monitor.md) - BoostMonitor æ•°æ®ç»“æ„è¯¦è§£
- [visualization_guide.md](visualization_guide.md) - å¯è§†åŒ–ä½¿ç”¨æŒ‡å—
- [overfitting_visualization_guide.md](overfitting_visualization_guide.md) - è¿‡æ‹Ÿåˆåˆ†æAPI

---

## âš™ï¸ é…ç½®é€‰é¡¹

### å¯è°ƒæ•´å‚æ•°

```python
# visualize_overfitting.py ç¬¬138è¡Œ
enable_detailed_monitoring = True  # å¯ç”¨/ç¦ç”¨è¯¦ç»†ç›‘æ§

# ç¬¬25è¡Œ
choice = 2  # 1=å¹²å‡€æ•°æ®, 2=5%å™ªå£°, 3=10%å™ªå£°

# ç¬¬53-58è¡Œ
config = {
    "base_estimator": DecisionTreeClassifier(max_depth=1),
    "n_estimators_list": [1, 5, 10, 20, 30, 40, 50, 75, 100],
    "learning_rate": 0.5,
    "random_state": 42,
}
```

---

## ğŸ‰ æ€»ç»“

ä¿®æ”¹åçš„ `visualize_overfitting.py`ï¼š

âœ… **å‘åå…¼å®¹**ï¼šé»˜è®¤è¡Œä¸ºä¸å˜  
âœ… **å¯é€‰å¢å¼º**ï¼šä¸€é”®å¯ç”¨è¯¦ç»†ç›‘æ§  
âœ… **æ•°æ®å®Œæ•´**ï¼šåˆ©ç”¨ monitor.md ä¸­æ‰€æœ‰å­—æ®µ  
âœ… **æ˜“äºä½¿ç”¨**ï¼šåªéœ€æ”¹ä¸€ä¸ªå˜é‡  
âœ… **çµæ´»æ‰©å±•**ï¼šæ˜“äºæ·»åŠ æ–°çš„å¯è§†åŒ–  

**æ¨èä½¿ç”¨åœºæ™¯ï¼š**
- ç ”ç©¶ AdaBoost è®­ç»ƒåŠ¨æ€
- åˆ†æå™ªå£°å½±å“
- è®ºæ–‡å®éªŒå¯è§†åŒ–
- æ¨¡å‹è°ƒä¼˜å’Œè¯Šæ–­

---

**åˆ›å»ºæ—¶é—´ï¼š** 2024å¹´  
**å‚è€ƒæ–‡æ¡£ï¼š** docs/monitor.md  
**ä¿®æ”¹æ–‡ä»¶ï¼š** visualize_overfitting.py  
**æ–°å¢æ–‡ä»¶ï¼š** visualize_overfitting_enhanced.py


